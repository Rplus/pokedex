<script>
import CPM from '@d/cpm.js';
import { fixNum } from '@/u.js';
import TypeTable from '@c/TypeTable.html';
import CostCalc from '@c/CostCalc.html';

let _cpm = Object.keys(CPM)
  .map(lv => ({ lv: lv, m: CPM[lv] }))
  .sort((a, b) => a.lv - b.lv);

let pvp_eff = [
  {
    type: 'buff',
    value: [5, 6, 7, 8].map(i => fixNum(i / 4)),
  },
  {
    type: 'debuff',
    value: [5, 6, 7, 8].map(i => fixNum(4 / i)),
  },
];

</script>



<details class="card" open>
  <summary>
    <h3>PVP Buff / Debuff factor</h3>
  </summary>
  <div>
    <table class="ml-a mr-a">
      <tr>
        <th></th>
        <th>1"</th>
        <th>2"</th>
        <th>3"</th>
        <th>4"</th>
      </tr>
      {#each pvp_eff as e}
        <tr>
          <th>{e.type}</th>

          {#each e.value as v}
            <td><small>x</small> {v}</td>
          {/each}
        </tr>
      {/each}
    </table>
  </div>
</details>

<CostCalc />

<TypeTable />

<details class="card">
  <summary>
    <h3>Level Multiplier (CPm)</h3>
  </summary>

  <div class="cpm-table">
    <table class="striped-table ml-a mr-a fz-s">
      {#each _cpm as item}
      <tr>
        <td>{item.lv}</td>
        <td>{item.m}</td>
      </tr>
      {/each}
    </table>
  </div>
</details>



<style>
  .cpm-table {
    columns: 3;
  }
  @media (max-width: 450px) {
    .cpm-table {
      columns: 2;
    }
  }
</style>
